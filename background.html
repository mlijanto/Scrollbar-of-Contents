<script type="text/javascript">
chrome.extension.onRequest.addListener( function( request, sender, sendResponse )
{
	if(
		request.displayValue == "displayOption" &&
		request.textLengthValue == "textLengthOption" &&
		request.levelValue == "levelOption" &&
		request.overlapValue == "overlapOption"
		)
		sendResponse({ 
						displayOption: localStorage.displayOption,
						textLengthOption: localStorage.textLengthOption,
						levelOption: localStorage.levelOption,
						overlapOption: localStorage.overlapOption
					});
	else
		sendResponse({});
});

chrome.tabs.onSelectionChanged.addListener( function( tabID, selectInfo )
{
	chrome.tabs.sendRequest( tabID, { tabEvent: "selectionChanged" } );
});

chrome.tabs.onUpdated.addListener( function( tabID, changeInfo, tab )
{
	chrome.tabs.sendRequest( tabID, { tabEvent: "updated" } );
});

chrome.browserAction.onClicked.addListener( function( tab )
{
	chrome.tabs.executeScript( null, { code: "headingMarkers.toggleVisibility()" } );
});
</script>